" Set Firefox Preferences
set! browser.startup.homepage="http://www.google.com/ig"
set! network.http.pipelining=true
set! network.http.proxy.pipelining=true
set! network.http.pipelining.maxrequests=8
set! nglayout.initialpaint.delay=0
set! network.proxy.socks_remote_dns=true
set! network.proxy.socks="localhost"
set! network.proxy.socks_port=8009

" shortcut mappings
map <F1> :buffers<cr>
map <F3> :sidebar Bookmarks<cr>
map <F4> :sbclose<cr>

map <Leader>r :bmlreloadcss<cr>

" completion options to emulate the firefox 3 location bar
set wildmode=list:full
set wildoptions=auto

" always start in normal mode when loading a webpage.
" use `gi` to refocus the previously-focused text box
set focuscontent

" open popups in a new window if they requested a specific size
set popups=2

" disable vimperator for some URLs
" NOTE: if both settings use the .* match, the latter setting seems to override the former
autocmd LocationChange .* :js modes.passAllKeys = /(mail|docs|wave)\.google\.com/.test(buffer.URL)
autocmd LocationChange www\.google\.com\/reader :js modes.passAllKeys = /www\.google\.com\/reader/.test(buffer.URL)


" Set the Vim filetype to "mail" when editing mail in GMail with the external editor: 
autocmd LocationChange .* :set editor="gvim -f"
autocmd LocationChange mail\.google\.com :set editor="gvim -f -c 'set ft=mail'"
autocmd LocationChange groups\.google\.com :set editor="gvim -f -c 'set ft=mail'"


" show the feed icon in the statusbar
javascript <<EOF
(function(){
    var feedPanel = document.createElement("statusbarpanel");
    feedPanel.setAttribute("id", "feed-panel-clone");
    feedPanel.appendChild(document.getElementById("feed-button"));
    feedPanel.firstChild.setAttribute("style", "padding: 0; max-height: 16px;");
    document.getElementById("status-bar")
            .insertBefore(feedPanel, document.getElementById("security-button"));
})();
EOF


"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" vim:ft=vim
