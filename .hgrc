# Best Goddamn hgrc file in the whole world.
# Author Seth House <seth@eseth.com>
# Modified: 2009-09-15
#
# Contains many commented-out examples toward the end of the file that are
# useful to add to a repo-specific hgrc.


[ui]
###############################################################################
username = Seth House <seth@eseth.com>
ignore = ~/.hgignore


[extensions]
###############################################################################
color =
extdiff =
fetch =
pager =
transplant =
parentrevspec =
hgext.bookmarks =
hgext.graphlog =
hgext.hgk =
hgext.mq =
hgext.notify =
hgext.purge =
hgext.rebase =
hgext.record =
hggit =


[alias]
###############################################################################
# Variable-detail changelog displays 
# FIXME: can't expand ~ in an alias?
l = log -q --style /home/shouse/.hg-templates/map-cmdline.friendly
ll = log -G --style /home/shouse/.hg-templates/map-cmdline.friendly
lll = log -G -v --style /home/shouse/.hg-templates/map-cmdline.friendly

dstat = diff --stat

# mq
qs = qseries -v
qlog = l -r qtip:qbase
# Show status output for the current patch
qstatus = status --rev -2:.
# Output all applied patches as a single diff
qudiff = diff -r $(hg parents -r qbase --template '#rev#') -r qtip

[merge-tools]
###############################################################################
vimdiff.executable = vimdiff
vimdiff.premerge = true
vimdiff.gui = false

# inkscape.executable = inkscape
# inkscape.premerge = false
# inkscape.gui = true


[merge-patterns]
###############################################################################
# **.svg = inkscape


[diff]
###############################################################################
git = 1
nodates = 1


[extdiff]
###############################################################################
# Allows a diff of diffs (useful for version-controlled MQ patches)
cmd.interdiff = hg-interdiff
cmd.vimdiff =
opts.vimdiff = -f '+next' '+execute "DirDiff" argv(0) argv(1)'


[pager]
###############################################################################
attend = help, diff, qdiff, status, log, l, ll, lll, annotate
pager = LESS='FSRXimJMW' less


[bookmarks]
###############################################################################
# Only update bookmark that you are currently using, instead of all
track.current = true


[hooks]
###############################################################################
# Show diffstat on pull
changegroup = hg diff --stat -r $HG_NODE -r tip

# Don't commit any code that contains 'pdb'
pretxncommit.pdb = hg export tip | (! grep 'pdb')

# Prevent pulling or pushing if MQ patches are applied (qpop -a first!)
prechangegroup.mq-no-pull = ! hg qtop > /dev/null 2>&1
preoutgoing.mq-no-push = ! hg qtop > /dev/null 2>&1

# Send an email per changeset on incoming push
# incoming.notify = python:hgext.notify.hook
# Send an email per push on incoming push
# hangegroup.notify = python:hgext.notify.hook


[web]
###############################################################################
# default "download as..." formats
allow_archive = bz2,gz
# description = "The purpose of this repo is..."
# baseurl = http://example.com/hg_repos
# allow push from insecure (!) connection
# push_ssl = false
# allow a push from any user
# allow_push = *
# if non-empty reqiure authentication
# allow_read = someuser


# [auth]
# someuser.username = someuser
# someuser.password = password

# [trusted]
# ignores repo-specific hgrc for non-trusted
# users = user1,user2
# groups = 

# [reposubs]
# People to send email notifications
# ** = user1@example.com,user2@example.com

# [email]
# from = user@example.com

# [smtp]
# host = smtp.example.com
# tls = true
# username = username
# password = p4ssw0rd

# [notify]
# won't send email unless false; for testing
# test = false
# reposubs can be external file, if wanted
# config =
# no. diff lines to include in the email
# maxdiff = 0
# template = Subject: {desc|firstline|strip}\n
#     {node|short}  {tags}  {author}  {date|date}
#     {files|tabindent}
#     {desc|tabindent|strip}
